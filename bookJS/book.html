<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Book</title>
		<link rel="stylesheet" href="css/common.css" />
		<link rel="stylesheet" href="css/book.css" />
		<script src="js/common.js"></script>
		<script src="js/db.js"></script>
		<script src="js/book.js"></script>
	</head>
	<body>
		<div class="wrapper" id="wrapper">
			<div class="caption">
				<a class="writers_name" id="writers_name"></a><span>(born <b id="writers_dateOfBirth"></b> &ndash; died <b id="writers_dateOfDeath"></b>)</span><a class="writers_work" id="writers_work" href="#"></a>
				<a href="index.html" alt="go to Index" class="button">go to Index</a>
			</div>
			<div id="book" class="book"></div>
		</div>
		<canvas>
			<div class="noscript" id="nohtml5">
				<div class="error">
					<P><b>HTML5 Canvas</b> need to be supported in order to use the site.</P>
					<P>To be able to use all of the site's functions, download and install one of the following browsers: <b>Opera</b>, <b>Chrome</b>, <b>Firefox</b>.</P>
				</div>
			</div>
		</canvas>
		<noscript>
			<div class="noscript">
				<div class="error">
					<P><b>JavaScript</b> need to be supported in order to use the site.</P>
					<P>To be able to use all of the site's functions, download and install one of the following browsers: <b>Opera</b>, <b>Chrome</b>, <b>Firefox</b>.</P>
				</div>
			</div>
		</noscript>
		<div class="noscript notfound" id="notfound">
			<div class="error">
				<p>Book not found. Use Index page to navigation.</p>
				<div class="notfound_button">
					<a href="index.html" alt="go to Index">go to Index</a>
				</div>
			</div>
		</div>
		<script>
			preventSelection(document);
			var elem = document.createElement('canvas');
			if(!!(elem.getContext && elem.getContext('2d')))
			{
				function initby(qs)
				{
					var re1 = /writer=([\d]+)/i;
					var re2 = /work=([\d]+)/i;
					if(re1.test(qs) && re2.test(qs))
					{
						var writer = parseInt(re1.exec(qs)[1]);
						var work = parseInt(re2.exec(qs)[1]);
						if(writers[writer] && writers[writer].works[work])
						{
							book.init(writer, work);
							return true;
						}
					}
					return false;
				}
				if(!initby(location.search))
				{
					ge("notfound").style.display = "block";
				}
			}
		</script>
	</body>
</html>
